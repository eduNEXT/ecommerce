{% extends 'edx/base.html' %}

{% load core_extras %}
{% load i18n %}
{% load staticfiles %}

{% block title %}
{% trans 'Basket' %}
{% endblock title %}

{% block navbar %}
    {% include 'edx/partials/_student_navbar.html' %}
{% endblock navbar %}


{% block javascript %}
  <script src="{% static 'js/apps/basket_app.js' %}"></script>

  <script>
    window.paymentErrorPath = "{% url 'payment_error' %}";
  </script>
{% endblock %}

{% block skip_link %}
    <div id="skip-link">
        <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
    </div>
{% endblock skip_link %}

{% block content %}
    <main id="main-content" aria-label="Checkout" tabindex=-1>
        <div class="basket {% if enable_client_side_checkout %}basket-client-side{% endif %}">
            <div class="container">
                {# Use a partial template so that AJAX can be used to re-render basket #}
                {% if basket.is_empty %}
                    {% block emptybasket %}
                        <div class="depth depth-2 message-error-content">
                            <h3>{% trans "No hay items en la canasta" %}</h3>
                            {% captureas dashboard_link_start %}
                                <a href="{{ homepage_url }}">
                            {% endcaptureas %}

                            {% captureas support_link_start %}
                                <a href="{{ support_url }}">
                            {% endcaptureas %}

                            {% blocktrans with link_end="</a>" %}
                                Si intentaste realizar una compra, no te preocupes, no realizamos cobro alguno. Regresa al {{ dashboard_link_start }}dashboard{{ link_end }} para intentar nuevamente, o <a href="mailto:contacto@campusromero.pe"> escribe a nuestro mail de soporte </a>.
                            {% endblocktrans %}
                        </div>
                    {% endblock %}
                {% else %}
                    {% if enable_client_side_checkout %}
                        {% include 'basket/partials/client_side_checkout_basket.html' %}
                    {% else %}
                        {% include 'basket/partials/hosted_checkout_basket.html' %}
                    {% endif %}
                {% endif %}
            </div>
        </div>
    </main>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5M26HM');</script>
<!-- End Google Tag Manager -->


{% endblock content %}

{% block post_js %}
  {# Load payment processor code after the basket app to ensure that all neccessary hooks are in place. #}
  {% if enable_client_side_checkout %}
    {% include client_side_payment_processor.get_template_name %}
  {% endif %}
{% endblock %}
